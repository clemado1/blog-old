---
layout: post
title: 익스플로러 HTTP 400 에러
---

![image]({{ site.baseurl }}/assets/img/pexels/400error.png)
크롬으로만 테스트를 하다보면 익스플로러에서 이런 에러가 뜬다. 처음에는 나도 어리둥절 했는데, 여러번 시도하다보면 **한글**을 get으로 넘길 때에만 오류가 발생하는 걸 볼 수 있었다.
한글을 자동으로 인코딩해주는 크롬과 다르게 익스플로러는 인코딩을 거치지 못하기 때문에 주소에 한글만 포함되면 이런 **400 error**가 뜬다.  

post방식으로 submit을 하면 상관없지만, a태그에서 href를 쓰거나 자바 location.href를 쓸 때는 자바스크립트에 있는 인코딩 함수를 호출해야 한다.  

*자바스크립트의 인코딩 함수*에는 3가지가 있다.  
- encodeURI
- escape
- encodeURIComponent

차이는 인코딩의 정도라고 생각하면 된다. 아래로 내려올수록 인코딩의 범위가 커진다. **encodeURI**는 오직 문자열만을 인코딩한다. **escape**는 `@ * _ + -. /`를 제외한 특수문자와 문자를, **encodeURIComponent**는 '를 제외한 모든 문자, 특수문자를 변환한다.  

어느 함수를 사용할지는 상황에 따라 선택하면 된다. 대신 주소 전체를 인코딩할 때는 **encodeURI**를 사용해야 한다. **escape**와 **encodeURIComponent**는 주소형식을 파괴하기 때문에 404에러가 뜨거나, 스크립트가 반응하지 않기 때문이다.


_ _ _


#####`http://localhost:8080/FarmParm/uitemList.im?category=채소&std=vdate` 의 주소가 각 함수에 따라 어떻게 변환될지를 보여주는 스크립트문의 예시 #####
```
<script type="text/javascript">
var uri;

uri = encodeURI('http://localhost:8080/FarmParm/uitemList.im?category=채소&std=vdate');
document.write(uri);
document.write('<br>');

uri = encodeURIComponent('http://localhost:8080/FarmParm/uitemList.im?category=채소&std=vdate');
document.write(uri);
document.write('<br>');

uri = escape('http://localhost:8080/FarmParm/uitemList.im?category=채소&std=vdate');
document.write(uri);
document.write('<br>');
</script>
```
**결과**는 다음과 같다.  
- encodeURI :  
	`http://localhost:8080/FarmParm/uitemList.im?category=%EC%B1%84%EC%86%8C&std=vdate`
- escape :  
	`http%3A//localhost%3A8080/FarmParm/uitemList.im%3Fcategory%3D%uCC44%uC18C%26std%3Dvdate`
- encodeURIComponent :   
`http%3A%2F%2Flocalhost%3A8080%2FFarmParm%2FuitemList.im%3Fcategory%3D%EC%B1%84%EC%86%8C%26std%3Dvdate`



- - -



##### encodeURI 사용 예시 #####
```
<button type="button" onclick="location.href=encodeURI('userView.us?page=${pageInfo.page }&user_id=${userList.user_id}&std=${std}&keyword=${keyword}')" id="gbutton">조회</button>

```
이렇게 전체 주소를 **encodeURI**를 해주어도 되고,  

```
function ilist(category, std, page){
		var uri = "itemList.im?category="+encodeURI(category)+"&std="+std+"&page="+page;
		location.href=uri;
	}

```
이렇게 한글만 **encodeURI**를 해주어도 된다. 이 때 **encodeURI**의 자리에는 **escape**와 **encodeURIComponent**도 쓸 수 있다.  

자세한 차이점은 [msdn](https://msdn.microsoft.com/ko-kr/library/xh9be5xc(v=vs.94).aspx)을 참고하자.

